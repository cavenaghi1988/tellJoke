{"version":3,"sources":["voicerss-tts.min.js"],"names":["button","document","getElementById","audio","VoiceRSS","speech","e","_validate","_request","key","src","hl","c","toLowerCase","a","Audio","canPlayType","replace","_buildRequest","t","_getXHR","onreadystatechange","readyState","status","responseText","indexOf","play","open","setRequestHeader","send","_detectCodec","r","f","ssml","XMLHttpRequest","ActiveXObject","toggleBtn","disabled","tellMe","joke","getJoke","res","fetch","json","err","console","log","onclick","onended"],"mappings":";AAAA,MAAMA,EAASC,SAASC,eAAe,UACjCC,EAAQF,SAASC,eAAe,SAGtC,IAAIE,EAAW,CACbC,OAAQ,SAAUC,GACXC,KAAAA,UAAUD,GAAI,KAAKE,SAASF,IAEnCC,UAAW,SAAUD,GACf,IAACA,EAAG,KAAM,6BACV,IAACA,EAAEG,IAAK,KAAM,2BACd,IAACH,EAAEI,IAAK,KAAM,wBACd,IAACJ,EAAEK,GAAI,KAAM,4BACbL,GAAAA,EAAEM,GAAK,QAAUN,EAAEM,EAAEC,cAAe,CAClCC,IAAAA,GAAI,EACAR,OAAAA,EAAEM,EAAEC,eACL,IAAA,MACHC,GAAK,IAAIC,OAAOC,YAAY,cAAcC,QAAQ,KAAM,IACxD,MACG,IAAA,MACHH,GAAK,IAAIC,OAAOC,YAAY,aAAaC,QAAQ,KAAM,IACvD,MACG,IAAA,MACHH,GAAK,IAAIC,OAAOC,YAAY,aAAaC,QAAQ,KAAM,IACvD,MACG,IAAA,MACHH,GAAK,IAAIC,OAAOC,YAAY,aAAaC,QAAQ,KAAM,IACvD,MACG,IAAA,MACHH,GAAK,IAAIC,OAAOC,YAAY,eAAeC,QAAQ,KAAM,IAEzD,IAACH,EAAG,KAAM,gDAAkDR,EAAEM,IAGtEJ,SAAU,SAAUF,GACdQ,IAAAA,EAAI,KAAKI,cAAcZ,GACzBa,EAAI,KAAKC,UACXD,EAAEE,mBAAqB,WACjB,GAAA,GAAKF,EAAEG,YAAc,KAAOH,EAAEI,OAAQ,CACpC,GAAA,GAAKJ,EAAEK,aAAaC,QAAQ,SAAU,MAAMN,EAAEK,aAElDrB,EAAMO,IAAMS,EAAEK,aACdrB,EAAMuB,SAEPP,EAAEQ,KAAK,OAAQ,6BAA6B,GAAKR,EAAES,iBAAiB,eAAgB,oDAAqDT,EAAEU,KAAKf,IAErJI,cAAe,SAAUZ,GACnBQ,IAAAA,EAAIR,EAAEM,GAAK,QAAUN,EAAEM,EAAEC,cAAgBP,EAAEM,EAAI,KAAKkB,eACjD,MAAA,QAAUxB,EAAEG,KAAO,IAAM,SAAWH,EAAEI,KAAO,IAAM,QAAUJ,EAAEK,IAAM,IAAM,OAASL,EAAEyB,GAAK,IAAM,OAASjB,GAAK,IAAM,OAASR,EAAE0B,GAAK,IAAM,UAAY1B,EAAE2B,MAAQ,IAAM,aAEhLH,aAAc,WACRxB,IAAAA,EAAI,IAAIS,MACLT,OAAAA,EAAEU,YAAY,cAAcC,QAAQ,KAAM,IAAM,MAAQX,EAAEU,YAAY,aAAaC,QAAQ,KAAM,IAAM,MAAQX,EAAEU,YAAY,aAAaC,QAAQ,KAAM,IAAM,MAAQX,EAAEU,YAAY,aAAaC,QAAQ,KAAM,IAAM,MAAQX,EAAEU,YAAY,eAAeC,QAAQ,KAAM,IAAM,MAAQ,IAE/RG,QAAS,WACH,IACK,OAAA,IAAIc,eACX,MAAO5B,IACL,IACK,OAAA,IAAI6B,cAAc,kBACzB,MAAO7B,IACL,IACK,OAAA,IAAI6B,cAAc,sBACzB,MAAO7B,IACL,IACK,OAAA,IAAI6B,cAAc,sBACzB,MAAO7B,IACL,IACK,OAAA,IAAI6B,cAAc,kBACzB,MAAO7B,IACL,IACK,OAAA,IAAI6B,cAAc,qBACzB,MAAO7B,IACH,KAAA,8CAIV,SAAS8B,IACPpC,EAAOqC,UAAYrC,EAAOqC,SAG5B,SAASC,EAAOC,GACdnC,EAASC,OAAO,CACdI,IAAK,mCACLC,IAAK6B,EACL5B,GAAI,QACJoB,EAAG,EACHnB,EAAG,MACHoB,EAAG,qBACHC,MAAM,IAIV,eAAeO,IAET,IACIC,MAAAA,QAAYC,MAFL,kGAIbJ,SADmBG,EAAIE,QACXJ,MACZH,IACA,MAAOQ,GACPC,QAAQC,IAAIF,IAKhB5C,EAAO+C,QAAUP,EACjBrC,EAAM6C,QAAUZ","file":"voicerss-tts.min.d1e59759.js","sourceRoot":"../src","sourcesContent":["const button = document.getElementById(\"button\");\nconst audio = document.getElementById(\"audio\");\n\n\"use strict\";\nvar VoiceRSS = {\n  speech: function (e) {\n    this._validate(e), this._request(e)\n  },\n  _validate: function (e) {\n    if (!e) throw \"The settings are undefined\";\n    if (!e.key) throw \"The API key is undefined\";\n    if (!e.src) throw \"The text is undefined\";\n    if (!e.hl) throw \"The language is undefined\";\n    if (e.c && \"auto\" != e.c.toLowerCase()) {\n      var a = !1;\n      switch (e.c.toLowerCase()) {\n        case \"mp3\":\n          a = (new Audio).canPlayType(\"audio/mpeg\").replace(\"no\", \"\");\n          break;\n        case \"wav\":\n          a = (new Audio).canPlayType(\"audio/wav\").replace(\"no\", \"\");\n          break;\n        case \"aac\":\n          a = (new Audio).canPlayType(\"audio/aac\").replace(\"no\", \"\");\n          break;\n        case \"ogg\":\n          a = (new Audio).canPlayType(\"audio/ogg\").replace(\"no\", \"\");\n          break;\n        case \"caf\":\n          a = (new Audio).canPlayType(\"audio/x-caf\").replace(\"no\", \"\")\n      }\n      if (!a) throw \"The browser does not support the audio codec \" + e.c\n    }\n  },\n  _request: function (e) {\n    var a = this._buildRequest(e),\n      t = this._getXHR();\n    t.onreadystatechange = function () {\n      if (4 == t.readyState && 200 == t.status) {\n        if (0 == t.responseText.indexOf(\"ERROR\")) throw t.responseText;\n        // new Audio(t.responseText).play()\n        audio.src = t.responseText;\n        audio.play();\n      }\n    }, t.open(\"POST\", \"https://api.voicerss.org/\", !0), t.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded; charset=UTF-8\"), t.send(a)\n  },\n  _buildRequest: function (e) {\n    var a = e.c && \"auto\" != e.c.toLowerCase() ? e.c : this._detectCodec();\n    return \"key=\" + (e.key || \"\") + \"&src=\" + (e.src || \"\") + \"&hl=\" + (e.hl || \"\") + \"&r=\" + (e.r || \"\") + \"&c=\" + (a || \"\") + \"&f=\" + (e.f || \"\") + \"&ssml=\" + (e.ssml || \"\") + \"&b64=true\"\n  },\n  _detectCodec: function () {\n    var e = new Audio;\n    return e.canPlayType(\"audio/mpeg\").replace(\"no\", \"\") ? \"mp3\" : e.canPlayType(\"audio/wav\").replace(\"no\", \"\") ? \"wav\" : e.canPlayType(\"audio/aac\").replace(\"no\", \"\") ? \"aac\" : e.canPlayType(\"audio/ogg\").replace(\"no\", \"\") ? \"ogg\" : e.canPlayType(\"audio/x-caf\").replace(\"no\", \"\") ? \"caf\" : \"\"\n  },\n  _getXHR: function () {\n    try {\n      return new XMLHttpRequest\n    } catch (e) {}\n    try {\n      return new ActiveXObject(\"Msxml3.XMLHTTP\")\n    } catch (e) {}\n    try {\n      return new ActiveXObject(\"Msxml2.XMLHTTP.6.0\")\n    } catch (e) {}\n    try {\n      return new ActiveXObject(\"Msxml2.XMLHTTP.3.0\")\n    } catch (e) {}\n    try {\n      return new ActiveXObject(\"Msxml2.XMLHTTP\")\n    } catch (e) {}\n    try {\n      return new ActiveXObject(\"Microsoft.XMLHTTP\")\n    } catch (e) {}\n    throw \"The browser does not support HTTP request\"\n  }\n};\n\nfunction toggleBtn() {\n  button.disabled = !button.disabled\n}\n\nfunction tellMe(joke) {\n  VoiceRSS.speech({\n    key: '5ae2ed2ba46c4c738b22ae9314afaa60',\n    src: joke,\n    hl: 'en-us',\n    r: 0,\n    c: 'mp3',\n    f: '44khz_16bit_stereo',\n    ssml: false\n  });\n}\n\nasync function getJoke() {\n  const urlApi = \"https://sv443.net/jokeapi/v2/joke/Programming?blacklistFlags=nsfw,religious,racist&type=single\"\n  try {\n    const res = await fetch(urlApi);\n    const data = await res.json();\n    tellMe(data.joke);\n    toggleBtn();\n  } catch (err) {\n    console.log(err);\n  }\n}\n\n\nbutton.onclick = getJoke;\naudio.onended = toggleBtn;"]}